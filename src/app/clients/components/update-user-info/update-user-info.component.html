<div class="container-fluid">
  <div class="edit-form">
    <h4>Edition d'information personnelle</h4>

    <form [formGroup]="nameForm" (submit)="onFormNameSubmit()">
      <h5>Nom d'utilisateur</h5>
      <mat-form-field appearance="outline" class="field">
        <mat-label>Nom d'utilisateur</mat-label>
        <input matInput placeholder="Nom" formControlName="name" />
        <mat-error *ngIf="hasControlError(nameForm, 'name', 'required')"
          >Le nom est requis</mat-error
        >
        <mat-error *ngIf="hasControlError(nameForm, 'name', 'minlength')"
          >Le nom doit avoir au moins 5 caractères</mat-error
        >
        <mat-error *ngIf="hasControlError(nameForm, 'name', 'maxlength')"
          >Le nom doit avoir au maximum 30 caractères</mat-error
        >
      </mat-form-field>
      <div class="text-end">
        <button mat-stroked-button [disabled]="nameForm.invalid">
          Enregistrer
        </button>
      </div>
    </form>
    <hr />
    <form [formGroup]="emailForm" (submit)="onEmailFormSubmit()">
      <h5>Email</h5>
      <mat-form-field appearance="outline" class="field">
        <mat-label>Email</mat-label>
        <input matInput placeholder="Email" formControlName="email" />
        <mat-error *ngIf="hasControlError(emailForm, 'email', 'required')"
          >L'email est requis</mat-error
        >
        <mat-error *ngIf="hasControlError(emailForm, 'email', 'pattern')"
          >L'email n'est pas valide</mat-error
        >
      </mat-form-field>
      <div class="text-end">
        <button mat-stroked-button [disabled]="emailForm.invalid">
          Enregistrer
        </button>
      </div>
    </form>
    <hr />

    <form [formGroup]="passwordForm">
      <h5>Mot de passe</h5>
      <mat-form-field appearance="outline" class="field">
        <mat-label>Ancien mot de passe</mat-label>
        <input
          matInput
          placeholder="Ancien mot de passe"
          formControlName="oldPassword"
          type="password"
        />
        <mat-error
          *ngIf="hasControlError(passwordForm, 'oldPassword', 'required')"
          >Votre ancien mot de passe est requis</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline" class="field">
        <mat-label>Nouveau mot de passe</mat-label>
        <input
          matInput
          placeholder="Nouveau mot de passe"
          formControlName="newPassword"
          type="password"
        />
        <mat-error
          *ngIf="hasControlError(passwordForm, 'newPassword', 'required')"
          >Veuillez entrer votre nouveau mot de passe</mat-error
        >
        <mat-error
          *ngIf="hasControlError(passwordForm, 'newPassword', 'pattern')"
          >Le mot de passe doit être compris entre 8 et 30 caractères</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline" class="field">
        <mat-label>Confirmez le mot de passe</mat-label>
        <input
          matInput
          placeholder="Confirmez le mot de passe"
          formControlName="confirmNewPassword"
          type="password"
        />
      </mat-form-field>
      <mat-error
        *ngIf="
          hasControlError(
            passwordForm,
            'confirmNewPassword',
            'passwordMismatch'
          )
        "
      >
        Les mots de passe ne correspondent pas
      </mat-error>
      <div class="text-end">
        <button
          mat-stroked-button
          [disabled]="passwordForm.invalid"
          (click)="onPasswordFormSubmit()"
        >
          Enregistrer
        </button>
      </div>
    </form>
    <div class="text-center">
      <button
        mat-stroked-button
        routerLink="/dashboard/list"
        (click)="closeDialog()"
      >
        Quitter
      </button>
    </div>
  </div>
</div>
